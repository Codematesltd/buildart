{% extends "base.html" %}

{% block title %}Projects - Buildaart Construction{% endblock %}

<!-- Add font imports -->
<style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap');
    
    h1, h2, h3, h4, .heading {
        font-family: 'Playfair Display', serif !important;
    }
    
    body, p, span, li, button {
        font-family: 'Times New Roman', Times, serif !important;
    }
</style>

{% block content %}
<!-- Projects Hero Section -->
<section class="relative">
    <img src="\static\images\project1.jpg" alt="Projects Background" class="w-full h-[60vh] object-cover">
    <div class="absolute inset-0 bg-black bg-opacity-50 flex flex-col justify-center items-center p-10 md:p-20 text-white">
        <h1 class="heading text-3xl md:text-5xl font-bold mb-4 text-center">Recent Projects</h1>
        <p class="text-xl max-w-2xl text-center">Crafting Excellence in Every Structure</p>
    </div>
</section>

<!-- Myhna Section -->
<section class="relative py-20 bg-rose-50/90">
    <div class="container mx-auto px-4 mb-32">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div class="space-y-6">
                    <span class="text-rose-700 text-sm tracking-wider uppercase">Featured Collection</span>
                    <h2 class="heading text-4xl md:text-5xl font-bold text-rose-900">
                        Myhna Projects
                    </h2>
                    <p class="text-rose-800 text-lg leading-relaxed">
                        A collection of unique architectural perspectives that blend timeless design with modern aesthetics.
                    </p>
                    <ul class="grid grid-cols-2 gap-4 mt-6">
                        <li class="flex items-center text-rose-700">
                            <svg class="w-5 h-5 text-rose-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                            </svg>
                            Vintage Views
                        </li>
                        <li class="flex items-center text-rose-700">
                            <svg class="w-5 h-5 text-rose-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                            </svg>
                            Modern Aesthetics
                        </li>
                    </ul>
                </div>

                <!-- Featured Projects Grid -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-4">
                        <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                            <img src="/static/images/projects/myhna/30-40view.jpg" alt="30's 40's View" class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                        </div>
                        <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                            <img src="/static/images/projects/myhna/barbecue.jpg" alt="Barbecue" class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                        </div>
                    </div>
                    <div class="mt-8">
                        <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                            <img src="/static/images/projects/myhna/clocktower.jpg" alt="Clock Tower View" class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Myhna Projects Grid -->
            <div class="mt-16">
                <h3 class="text-2xl font-bold mb-8 text-rose-800">Featured Myhna Projects</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- 30's,40's View -->
                    <div class="group">
                        <div class="relative overflow-hidden rounded-xl">
                            <img src="/static/images/projects/myhna/30-40view.jpg" alt="30's 40's View" 
                                 class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                <h4 class="text-white text-xl font-bold">30's,40's View</h4>
                                <p class="text-gray-300">Vintage Collection</p>
                                <button onclick="openGallery('myhna-30-40', 8)" 
                                        class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                    View Album
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Barbecue -->
                    <div class="group">
                        <div class="relative overflow-hidden rounded-xl">
                            <img src="/static/images/projects/myhna/barbecue.jpg" alt="Barbecue" 
                                 class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                <h4 class="text-white text-xl font-bold">Barbecue</h4>
                                <p class="text-gray-300">Outdoor Living</p>
                                <button onclick="openGallery('myhna-barbecue', 6)" 
                                        class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                    View Album
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Clock Tower View -->
                    <div class="group">
                        <div class="relative overflow-hidden rounded-xl">
                            <img src="/static/images/projects/myhna/clocktower.jpg" alt="Clock Tower View" 
                                 class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                <h4 class="text-white text-xl font-bold">Clock Tower View</h4>
                                <p class="text-gray-300">Heritage Design</p>
                                <button onclick="openGallery('myhna-clocktower', 7)" 
                                        class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                    View Album
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Temple View -->
                    <div class="group">
                        <div class="relative overflow-hidden rounded-xl">
                            <img src="/static/images/projects/myhna/Temple-View.jpg" alt="Temple View" 
                                 class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                <h4 class="text-white text-xl font-bold">Temple View</h4>
                                <p class="text-gray-300">Cultural Heritage</p>
                                <button onclick="openGallery('myhna-temple', 5)" 
                                        class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                    View Album
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Add View More Projects Button -->
            <div class="mt-12 text-center">
                <a href="https://myhnaproperties.com/Myhna-Meadows/" 
                   target="_blank" 
                   rel="noopener noreferrer" 
                   class="inline-flex items-center gap-2 px-8 py-4 bg-rose-600 hover:bg-rose-700 text-white rounded-full shadow-lg transform hover:scale-105 transition-all duration-300">
                    <span class="text-lg font-semibold">View More Myhna Projects</span>
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
    <!-- Decorative element -->
    <div class="absolute right-0 top-1/2 -translate-y-1/2 w-64 h-64 opacity-5">
        <svg viewBox="0 0 100 100" class="w-full h-full fill-current text-rose-700">
            <path d="M50 0C60 20 80 20 100 50C80 80 60 80 50 100C40 80 20 80 0 50C20 20 40 20 50 0Z"/>
        </svg>
    </div>
</section>

<!-- Project Categories -->
<section class="relative py-20">
    <!-- Cafe & Restaurants -->
    <div class="bg-cyan-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-cyan-700 text-sm tracking-wider uppercase">Hospitality Design</span>
                        <h2 class="heading text-4xl md:text-5xl font-bold text-cyan-900">
                            Café & Restaurants
                        </h2>
                        <p class="text-cyan-800 text-lg leading-relaxed">
                            Café and restaurant projects are designed to create vibrant, welcoming spaces that combine aesthetic appeal with functional efficiency. These establishments focus on creating a cozy and unique ambiance tailored to the theme, cuisine, and target audience.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-cyan-700">
                                <svg class="w-5 h-5 text-cyan-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Indoor Seating
                            </li>
                            <li class="flex items-center text-cyan-700">
                                <svg class="w-5 h-5 text-cyan-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Kitchen Layout
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/cafe/project5.jpg" alt="Cafe Project 1" class="object-cover">
                            </div>
                            <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/cafe/project8.jpg" alt="Cafe Project 2" class="object-cover">
                            </div>
                        </div>
                        <div class="mt-8">
                            <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/bejewelled/project3.jpg" alt="Cafe Project 3" class="object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8 text-cyan-800">Featured Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                       
                </div>

                <!-- Ongoing Projects -->
                <div class="mt-8 border-t border-gray-200 pt-8">
                    <h3 class="text-2xl font-bold mb-6 text-cyan-600">Ongoing Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Cafe Project Card -->
                        <div class="group relative">
                            <div class="absolute -top-2 -right-2 bg-cyan-500 text-white px-3 py-1 rounded-full text-sm z-10">
                                Ongoing
                            </div>
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/cafe/project1.jpg" alt="Urban Cafe" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Urban Cafe</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('cafe', 9)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Brewery Project Card -->
                        <div class="group relative">
                            <div class="absolute -top-2 -right-2 bg-cyan-500 text-white px-3 py-1 rounded-full text-sm z-10">
                                Ongoing
                            </div>
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/brewery/project1.jpg" alt="Modern Brewery" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Modern Brewery</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('brewery', 11)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase Projects Section -->
    <div class="bg-white/80 py-20">
        <div class="container mx-auto px-4">
            <h2 class="heading text-4xl font-bold mb-12">Latest Projects</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% if supabase_projects %}
                    {% for project in supabase_projects %}
                    <div class="group">
                        <div class="relative overflow-hidden rounded-xl">
                            {% if project.image_urls %}
                                {# Find the first valid image extension #}
                                {% set img_url = None %}
                                {% for url in project.image_urls %}
                                    {% if url.endswith('.jpg') or url.endswith('.jpeg') or url.endswith('.png') or url.endswith('.webp') %}
                                        {% set img_url = url %}
                                    {% endif %}
                                    {# Remove the {% break %} and let the last valid url win, or use the first by checking if img_url is not set #}
                                {% endfor %}
                            {% endif %}
                            {% if img_url %}
                                <img src="{{ img_url }}" 
                                     alt="{{ project.name }}" 
                                     class="w-full h-[300px] object-cover transform group-hover:scale-110 transition-all duration-700">
                            {% else %}
                                <div class="w-full h-[300px] bg-gray-100 flex items-center justify-center">
                                    <p class="text-gray-400">No images available</p>
                                </div>
                            {% endif %}
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                <h4 class="text-white text-xl font-bold">{{ project.name }}</h4>
                                <p class="text-gray-300">{{ project.description }}</p>
                                {% if project.image_urls and project.image_urls|length > 0 %}
                                <button onclick="openSupabaseGallery('{{ project.name }}', {{ project.image_urls|tojson|safe }})" 
                                        class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                    View Gallery ({{ project.image_urls|length }} images)
                                </button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="col-span-3 text-center py-10">
                        <p class="text-gray-500">No projects available</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Commercial Section -->
    <div class="bg-amber-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="order-2 lg:order-1">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-4">
                                <div class="aspect-[4/5] rounded-xl overflow-hidden">
                                    <img src="/static/images/projects/bejewelled/project7.jpg" alt="Bejewelled Showroom" 
                                         class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                                </div>
                                <div class="aspect-[4/5] rounded-xl overflow-hidden">
                                    <img src="/static/images/projects/bejewelled/project1.jpg" alt="Bejewelled Interior" 
                                         class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                                </div>
                            </div>
                           <div class="aspect-[4/5] rounded-xl overflow-hidden">
                                    <img src="/static/images/projects/special/project1.png" alt="Bejewelled Interior" 
                                         class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                                </div>
                        </div>
                    </div>
                    <div class="space-y-6 order-1 lg:order-2">
                        <span class="text-amber-700 text-sm tracking-wider uppercase">Commercial Design</span>
                        <h2 class="heading text-4xl md:text-5xl font-bold text-amber-900">
                            Commercial Projects
                        </h2>
                        <p class="text-amber-800 text-lg leading-relaxed">
                            Commercial projects encompass office buildings, shopping complexes, retail outlets, and mixed-use developments. These projects are tailored to support business operations, customer service, and retail activities.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-amber-700">
                                <svg class="w-5 h-5 text-amber-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Office Spaces
                            </li>
                            <li class="flex items-center text-amber-700">
                                <svg class="w-5 h-5 text-amber-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Retail Outlets
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8 text-amber-800">Featured Commercial Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Bejewelled Project Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/bejewelled/project1.jpg" alt="Bejewelled Showroom" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Bejewelled Commercial Showroom</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('bejewelled', 8)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div> 
                     </div>

                <!-- Ongoing Projects -->
                <div class="mt-8 border-t border-gray-200 pt-8">
                    <h3 class="text-2xl font-bold mb-6 text-amber-600">Ongoing Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Something Special Project Card -->
                        <div class="group relative">
                            <div class="absolute -top-2 -right-2 bg-amber-500 text-white px-3 py-1 rounded-full text-sm z-10">
                                Ongoing
                            </div>
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/special/project1.png" alt="Something Special Commercial" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Something Special Commercial</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('special', 6)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Educational Institutes Section -->
    <div class="bg-emerald-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-emerald-700 text-sm tracking-wider uppercase">Educational Design</span>
                        <h2 class="heading text-4xl md:text-5xl font-bold text-emerald-900">
                            Educational Institutes
                        </h2>
                        <p class="text-emerald-800 text-lg leading-relaxed">
                            Educational projects include schools, colleges, and universities designed to provide conducive learning environments. These projects focus on creating spaces that support academic activities, research, and student engagement.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-emerald-700">
                                <svg class="w-5 h-5 text-emerald-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Classrooms
                            </li>
                            <li class="flex items-center text-emerald-700">
                                <svg class="w-5 h-5 text-emerald-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Laboratories
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/arohana/project1.jpg" alt="School Project" class="object-cover">
                            </div>
                            <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/arohana/project3.jpg" alt="College Project" class="object-cover">
                            </div>
                        </div>
                        <div class="mt-8">
                            <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/special/project3.png" alt="University Project" class="object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8 text-emerald-800">Featured Educational Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    
                        <!-- Arohana Project Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/arohana/project1.jpg" alt="Arohana School" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Arohana School</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('arohana', 8)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                <!-- Ongoing Projects -->
                <div class="mt-8 border-t border-gray-200 pt-8">
                    <h3 class="text-2xl font-bold mb-6 text-emerald-600">Ongoing Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Neuron School Project Card -->
                        <div class="group relative">
                            <div class="absolute -top-2 -right-2 bg-emerald-500 text-white px-3 py-1 rounded-full text-sm z-10">
                                Ongoing
                            </div>
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/school/project1.jpg" alt="Neuron School" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Neuron School</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('neuron', 12)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Residential Section -->
    <div class="bg-violet-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-violet-700 text-sm tracking-wider uppercase">Residential Design</span>
                        <h2 class="heading text-4xl md:text-5xl font-bold text-violet-900">
                            Residential Projects
                        </h2>
                        <p class="text-violet-800 text-lg leading-relaxed">
                            Our residential projects blend modern aesthetics with functional living spaces. Each home is thoughtfully designed to reflect the unique lifestyle of its inhabitants, incorporating sustainable features and innovative architectural elements.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-violet-700">
                                <svg class="w-5 h-5 text-violet-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Luxury Villas
                            </li>
                            <li class="flex items-center text-violet-700">
                                <svg class="w-5 h-5 text-violet-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Premium Apartments
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-[4/5] rounded-xl overflow-hidden">
                                <img src="/static/images/projects/blooming/1.jpg" alt="Blooming Haus" 
                                     class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                            </div>
                            <div class="aspect-[4/5] rounded-xl overflow-hidden">
                                <img src="/static/images/projects/tranquil/2.jpg" alt="Le Tranquil" 
                                     class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="aspect-[4/5] rounded-xl overflow-hidden">
                                <img src="/static/images/projects/catalsyt/1.jpg" alt="Catalyst" 
                                     class="w-full h-full object-cover transform hover:scale-110 transition-all duration-700">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8 text-violet-800">Featured Residential Projects</h3>
                    <div id="residentialContainer" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Initial Project Cards -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/blooming/1.jpeg" alt="The Blooming Haus" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">The Blooming Haus</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('blooming', 15)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Le Tranquil Project Card -->
                        <div class="group project-card">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/tranquil/1.jpg" alt="Le Tranquil" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Le Tranquil</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('letranquil', 12)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Trazient Nest Project Card -->
                        <div class="group project-card">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/trazient/1.jpg" alt="Trazient Nest" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Trazient Nest</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('trazient', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Casa Project Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl h-[300px]">
                                <img src="/static/images/projects/casa/1.jpg" alt="Casa" 
                                     class="w-full h-full object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Casa</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('casa', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Catalyst Project Card -->
                        <div class="group project-card">
                            <div class="relative overflow-hidden rounded-xl h-[300px]">
                                <img src="/static/images/projects/catalsyt/1.jpg" alt="Catalyst" 
                                     class="w-full h-full object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Catalyst</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('catalyst', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Candour Project Card -->
                        <div class="group project-card">
                            <div class="relative overflow-hidden rounded-xl h-[300px]">
                                <img src="/static/images/projects/candour/1.jpg" alt="Candour" 
                                     class="w-full h-full object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Candour</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('candour', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Sanctum Project Card -->
                        <div class="group project-card">
                            <div class="relative overflow-hidden rounded-xl h-[300px]">
                                <img src="/static/images/projects/santum/1.jpg " alt="Sanctum" 
                                     class="w-full h-full object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Sanctum</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('sanctum', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Urban Project Card -->
                        <div class="group project-card">
                            <div class="relative overflow-hidden rounded-xl h-[300px]">
                                <img src="/static/images/projects/urban/1.jpg" alt="Urban" 
                                     class="w-full h-full object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Urban</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('urban', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Brick Project Card -->
                        <div class="group project-card">
                            <div class="relative overflow-hidden rounded-xl h-[300px]">
                                <img src="/static/images/projects/brick/1.jpg" alt="Brick" 
                                     class="w-full h-full object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Brick</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('brick', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                     <!-- Pagination Controls -->
                    <div class="flex justify-center mt-8">
                        <button id="showMoreResidential" 
                                class="px-6 py-3 bg-accent text-white rounded-lg hover:bg-accent/90 transition-all">
                            Show More Projects
                        </button>
                        <button id="backToFirstResidential" 
                                class="px-6 py-3 bg-accent text-white rounded-lg hover:bg-accent/90 transition-all hidden ml-4">
                            Back to First Projects
                        </button>
                    </div>
                </div>

                <!-- Ongoing Projects -->
                <div class="mt-8 border-t border-gray-200 pt-8">
                    <h3 class="text-2xl font-bold mb-6 text-violet-600">Ongoing Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- The Frames Residence Project Card -->
                        <div class="group relative">
                            <div class="absolute -top-2 -right-2 bg-violet-500 text-white px-3 py-1 rounded-full text-sm z-10">
                                Ongoing
                            </div>
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/the/1.jpg" alt="The Frames Residence" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">The Frames Residence</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('the', 5)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- The Cantilever Project Card -->
                        <div class="group relative">
                            <div class="absolute -top-2 -right-2 bg-violet-500 text-white px-3 py-1 rounded-full text-sm z-10">
                                Ongoing
                            </div>
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/cantilever/1.jpg" alt="The Cantilever" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">The Cantilever</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('cantilever', 5)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Public Buildings Section -->
    <div class="bg-blue-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-blue-700 text-sm tracking-wider uppercase">Public Design</span>
                        <h2 class="heading text-4xl md:text-5xl font-bold text-blue-900">
                            Public Buildings
                        </h2>
                        <p class="text-blue-800 text-lg leading-relaxed">
                            Public building projects include government buildings, community centers, and other public facilities designed to serve the community. These projects focus on creating functional and accessible spaces for public use.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-blue-700">
                                <svg class="w-5 h-5 text-blue-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Government Buildings
                            </li>
                            <li class="flex items-center text-blue-700">
                                <svg class="w-5 h-5 text-blue-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Community Centers
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/meta mophosis/project3.jpg" alt="Government Building" class="object-cover">
                            </div>
                            <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/meta mophosis/project1.jpg" alt="Community Center" class="object-cover">
                            </div>
                        </div>
                        <div class="mt-8">
                            <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/meta mophosis/project5.jpg" alt="Library Project" class="object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8 text-blue-800">Featured Public Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Project Cards -->
                        <div class="group cursor-pointer">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/meta mophosis/project8.jpg" alt="City Hall" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Meta Morphosis Public Building</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('meta morphosis', 9)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Gallery Modal -->
<div id="galleryModal" class="hidden fixed inset-0 z-[100] bg-black/90 flex items-center justify-center">
    <div class="relative max-w-7xl mx-auto px-4">
        <!-- Close Button -->
        <button type="button" 
                id="modalCloseBtn"
                class="absolute -top-12 right-4 text-white text-4xl hover:text-gray-300 focus:outline-none z-[110]"
                onclick="closeGallery()">
            &times;
        </button>
        
        <!-- Project Title -->
        <h2 id="modalTitle" class="text-white text-2xl font-bold mb-4 text-center"></h2>
        
        <!-- Main Image -->
        <div class="relative">
            <img id="mainImage" src="" alt="" class="max-h-[70vh] mx-auto">
            <!-- Navigation Arrows -->
            <button onclick="prevImage()" class="absolute left-0 top-1/2 -translate-y-1/2 text-white text-4xl px-4 hover:text-yellow-500">❮</button>
            <button onclick="nextImage()" class="absolute right-0 top-1/2 -translate-y-1/2 text-white text-4xl px-4 hover:text-yellow-500">❯</button>
        </div>
        
        <!-- Thumbnails -->
        <div id="thumbnails" class="flex space-x-2 mt-4 overflow-x-auto pb-2"></div>
    </div>
</div>

<script>
const projects = [
    { id: 'letranquil', name: 'Le Tranquil', count: 12 },
    { id: 'catalyst', name: 'Catalyst', count: 8 },
    { id: 'candour', name: 'Candour', count: 10 },
    { id: 'blooming', name: 'The Blooming Haus', count: 15 },
    { id: 'sanctum', name: 'Sanctum', count: 9 },
    { id: 'urban', name: 'Urban Envelope', count: 11 },
    { id: 'cantilever', name: 'The Cantilever', count: 7 },
    { id: 'frames', name: 'The Frames Residence', count: 13 },
    { id: 'metamorphosis', name: 'Meta Morphosis Public Building', count: 10 },
    { id: 'wateredge', name: 'Water Edge Resort', count: 14 },
    { id: 'bejewelled', name: 'Bejewelled Commercial Showroom', count: 8 },
    { id: 'special', name: 'Something Special Commercial', count: 6 },
    { id: 'cafe', name: 'Cafe', count: 9 },
    { id: 'brewery', name: 'Brewery', count: 11 },
    { id: 'neuron', name: 'Neuron School', count: 12 }
];

let currentIndex = 4; // Start after initial 4 projects
let currentImages = [];
let currentImageIndex = 0;

// Load More Projects
document.getElementById('loadMore').addEventListener('click', function() {
    const container = document.getElementById('projectContainer');
    const projectsToAdd = projects.slice(currentIndex, currentIndex + 4);
    
    // Hide all current project cards
    const currentCards = container.querySelectorAll('.project-card');
    currentCards.forEach(card => {
        card.classList.add('hidden');
    });
    
    // Add new project cards
    projectsToAdd.forEach(project => {
        const projectCard = `
            <div class="project-card bg-white shadow-lg rounded-xl overflow-hidden cursor-pointer" 
                 onclick="openGallery('${project.id}', ${project.count})" 
                 data-project="${project.name}">
                <img src="/static/images/projects/${project.id}/1.jpg" alt="${project.name}" 
                     class="w-full h-64 object-cover hover:scale-105 transition-transform duration-300">
                <div class="p-4">
                    <h3 class="text-xl font-bold text-yellow-700">${project.name}</h3>
                </div>
            </div>
        `;
        container.insertAdjacentHTML('beforeend', projectCard);
    });
    
    currentIndex += 4;
    if (currentIndex >= projects.length) {
        this.style.display = 'none';
        document.getElementById('backToStart').classList.remove('hidden');
    }
});

// Back to Start Function
document.getElementById('backToStart').addEventListener('click', function() {
    const container = document.getElementById('projectContainer');
    
    // Remove all current cards
    container.innerHTML = '';
    
    // Add back initial 4 projects
    projects.slice(0, 4).forEach(project => {
        const projectCard = `
            <div class="project-card bg-white shadow-lg rounded-xl overflow-hidden cursor-pointer" 
                 onclick="openGallery('${project.id}', ${project.count})" 
                 data-project="${project.name}">
                <img src="/static/images/projects/${project.id}/1.jpg" alt="${project.name}" 
                     class="w-full h-64 object-cover hover:scale-105 transition-transform duration-300">
                <div class="p-4">
                    <h3 class="text-xl font-bold text-yellow-700">${project.name}</h3>
                </div>
            </div>
        `;
        container.insertAdjacentHTML('beforeend', projectCard);
    });
    
    // Reset state
    currentIndex = 4;
    this.classList.add('hidden');
    document.getElementById('loadMore').style.display = 'inline-block';
});

// Gallery Functions
function openGallery(projectId, imageCount) {
    const modal = document.getElementById('galleryModal');
    
    // Update title based on project ID
    const projectTitles = {
        'cafe': 'Urban Cafe Project',
        'brewery': 'Modern Brewery Project',
        'bejewelled': 'Bejewelled Commercial Showroom',
        'special': 'Something Special Commercial Project',
        'techpark': 'Modern Tech Park Project',
        'wateredge': 'Water Edge Resort Project',
        'letranquil': 'Le Tranquil Project',
        'catalyst': 'Catalyst Project',
        'frames': 'The Frames Residence Project',
        'sanctum': 'Sanctum Project',
        'modern-school': 'Modern School Project',
        'arohana': 'Arohana School Project',
        'neuron': 'Neuron School Project',
        'metamorphosis': 'Meta Morphosis Public Building Project',
        'water-edge-resort': 'Water Edge Resort Project',  // Updated title
        'blooming': 'The Blooming Haus',
        'trazient': 'Trazient Nest',
        'casalux': 'Casa Lux',
        'candour': 'Candour',
        'urban': 'Urban Envelope',
        'brick': 'House of Brick',
        'cantilever': 'The Cantilever'
    };
    
    // Correct base path construction
    const basePath = `/static/images/projects/${projectId.toLowerCase()}`;
    document.getElementById('modalTitle').textContent = projectTitles[projectId] || projectId;
    
    // Generate image paths with correct numbering
    currentImages = Array.from({length: imageCount}, (_, i) => {
        const index = i + 1;
        // Check if project uses special naming convention
        if (projectId === 'special') {
            return `${basePath}/project${index}.png`;
        } else if (['blooming', 'letranquil', 'trazient', 'casa', 'catalyst', 
                    'candour', 'sanctum', 'urban', 'brick', 'the', 'cantilever'].includes(projectId.toLowerCase())) {
            // For residential projects that use number-only naming
            return `${basePath}/${index}.jpg`;
        } else {
            // For other projects that use project{number} naming
            return `${basePath}/project${index}.jpg`;
        }
    });

    currentImageIndex = 0;
    
    // Pre-load first image before showing modal
    const preloadImage = new Image();
    preloadImage.onload = function() {
        updateMainImage();
        createThumbnails();
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    };
    preloadImage.src = currentImages[0];
}

function updateMainImage() {
    const mainImage = document.getElementById('mainImage');
    mainImage.onerror = function() {
        console.error(`Failed to load image: ${this.src}`);
        this.src = '/static/images/placeholder.jpg';
    };
    mainImage.src = currentImages[currentImageIndex];
    
    // Update URL to debug in console
    console.log('Loading image:', currentImages[currentImageIndex]);
}

function createThumbnails() {
    const container = document.getElementById('thumbnails');
    container.innerHTML = '';
    
    currentImages.forEach((src, index) => {
        const thumb = document.createElement('img');
        thumb.onerror = function() {
            console.error(`Failed to load thumbnail: ${this.src}`);
            this.src = '/static/images/placeholder.jpg';
        };
        thumb.src = src;
        thumb.classList.add('h-20', 'w-20', 'object-cover', 'cursor-pointer', 'transition-all', 'duration-300');
        if (index === currentImageIndex) {
            thumb.classList.add('border-2', 'border-yellow-500');
        }
        thumb.onclick = () => {
            currentImageIndex = index;
            updateMainImage();
            updateThumbnailSelection();
        };
        container.appendChild(thumb);
    });
}

function updateThumbnailSelection() {
    const thumbnails = document.querySelectorAll('#thumbnails img');
    thumbnails.forEach((thumb, index) => {
        if (index === currentImageIndex) {
            thumb.classList.add('border-2', 'border-yellow-500');
        } else {
            thumb.classList.remove('border-2', 'border-yellow-500');
        }
    });
}

function nextImage() {
    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
    updateMainImage();
    updateThumbnailSelection();
}

function prevImage() {
    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
    updateMainImage();
    updateThumbnailSelection();
}

function closeGallery() {
    const modal = document.getElementById('galleryModal');
    if (modal) {
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
    }
}

document.addEventListener('DOMContentLoaded', () => {
    // Add specific close button handler
    document.getElementById('modalCloseBtn').addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        closeGallery();
    });

    // Close modal when clicking outside content
    document.getElementById('galleryModal').addEventListener('click', (e) => {
        if (e.target.id === 'galleryModal') {
            closeGallery();
        }
    });

    // Close on escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeGallery();
        }
    });
});

// Close modal on escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeGallery();
    }
});

// Residential Projects Configuration
const residentialProjects = [
    { id: 'blooming', name: 'The Blooming Haus', count: 15 },
    { id: 'letranquil', name: 'Le Tranquil', count: 12 },
    { id: 'trazient', name: 'Trazient Nest', count: 10 },
    { id: 'casalux', name: 'Casa Lux', count: 8 },
    { id: 'catalyst', name: 'Catalyst', count: 12 },
    { id: 'candour', name: 'Candour', count: 10 },
    { id: 'sanctum', name: 'Sanctum', count: 9 },
    { id: 'urban', name: 'Urban Envelope', count: 11 },
    { id: 'brick', name: 'House of Brick', count: 8 },
    { id: 'frames', name: 'The Frames', count: 13 },
    { id: 'cantilever', name: 'The Cantilever', count: 7 }
];

let currentResidentialIndex = 3; // Start after initial 3 projects

// Show More Projects Handler
document.getElementById('showMoreResidential').addEventListener('click', function() {
    const container = document.getElementById('residentialContainer');
    const currentCards = container.querySelectorAll('.project-card');
    
    // Hide current cards with animation
    currentCards.forEach(card => {
        card.classList.add('opacity-0', 'transition-opacity', 'duration-500');
        setTimeout(() => card.classList.add('hidden'), 500);
    });

    // Add new cards after animation
    setTimeout(() => {
        container.innerHTML = ''; // Clear container
        const projectsToShow = residentialProjects.slice(currentResidentialIndex, currentResidentialIndex + 3);
        
        projectsToShow.forEach(project => {
            const card = createProjectCard(project);
            container.insertAdjacentHTML('beforeend', card);
        });

        currentResidentialIndex += 3;
        
        // Show back button if we've shown all projects
        if (currentResidentialIndex >= residentialProjects.length) {
            this.classList.add('hidden');
            document.getElementById('backToFirstResidential').classList.remove('hidden');
        }
    }, 500);
});

// Back to First Projects Handler
document.getElementById('backToFirstResidential').addEventListener('click', function() {
    const container = document.getElementById('residentialContainer');
    const currentCards = container.querySelectorAll('.project-card');
    
    // Hide current cards with animation
    currentCards.forEach(card => {
        card.classList.add('opacity-0', 'transition-opacity', 'duration-500');
        setTimeout(() => card.classList.add('hidden'), 500);
    });

    // Show initial projects after animation
    setTimeout(() => {
        container.innerHTML = ''; // Clear container
        residentialProjects.slice(0, 3).forEach(project => {
            const card = createProjectCard(project);
            container.insertAdjacentHTML('beforeend', card);
        });

        // Reset state
        currentResidentialIndex = 3;
        this.classList.add('hidden');
        document.getElementById('showMoreResidential').classList.remove('hidden');
    }, 500);
});

// Helper function to create project card HTML
function createProjectCard(project) {
    return `
        <div class="group project-card opacity-0 transition-opacity duration-500">
            <div class="relative overflow-hidden rounded-xl">
                <img src="/static/images/projects/${project.id}/project1.jpg" alt="${project.name}" 
                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                    <h4 class="text-white text-xl font-bold">${project.name}</h4>
                    <p class="text-gray-300">Bangalore, 2023</p>
                    <button onclick="openGallery('${project.id}', ${project.count})" 
                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                        View Album
                    </button>
                </div>
            </div>
        </div>
    `;
}

// Show initial cards with animation
setTimeout(() => {
    const initialCards = document.querySelectorAll('.project-card');
    initialCards.forEach(card => card.classList.remove('opacity-0'));
}, 100);

// Add this function to your existing script section
function openSupabaseGallery(projectName, imageUrls) {
    const modal = document.getElementById('galleryModal');
    document.getElementById('modalTitle').textContent = projectName;
    
    // Set up the gallery with Supabase images
    currentImages = imageUrls;
    currentImageIndex = 0;
    
    // Update main image and thumbnails
    updateMainImage();
    createThumbnails();
    
    // Show modal
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeGallery() {
    const modal = document.getElementById('galleryModal');
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
    currentImages = [];
    currentImageIndex = 0;
}
</script>
{% endblock %}