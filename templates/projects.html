{% extends "base.html" %}

{% block title %}Projects - Buildaart Construction{% endblock %}

{% block content %}
<!-- Projects Hero Section -->
<section class="relative">
    <img src="\static\images\project1.jpg" alt="Projects Background" class="w-full h-[60vh] object-cover">
    <div class="absolute inset-0 bg-black bg-opacity-50 flex flex-col justify-center items-center p-10 md:p-20 text-white">
        <h1 class="text-3xl md:text-5xl font-bold mb-4 text-center">Recent Projects</h1>
        <p class="text-xl max-w-2xl text-center">Crafting Excellence in Every Structure</p>
    </div>
</section>

<!-- Project Categories -->
<section class="relative py-20">
    <!-- Cafe & Restaurants -->
    <div class="bg-amber-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-accent text-sm tracking-wider uppercase">Hospitality Design</span>
                        <h2 class="text-4xl md:text-5xl font-bold" style="font-family: 'Playfair Display', serif;">
                            Café & Restaurants
                        </h2>
                        <p class="text-gray-600 text-lg leading-relaxed">
                            Café and restaurant projects are designed to create vibrant, welcoming spaces that combine aesthetic appeal with functional efficiency. These establishments focus on creating a cozy and unique ambiance tailored to the theme, cuisine, and target audience.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Indoor Seating
                            </li>
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Kitchen Layout
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/cafe1.jpg" alt="Cafe Project 1" class="object-cover">
                            </div>
                            <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/cafe2.jpg" alt="Cafe Project 2" class="object-cover">
                            </div>
                        </div>
                        <div class="mt-8">
                            <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/cafe3.jpg" alt="Cafe Project 3" class="object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8">Featured Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Cafe Project Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/cafe/project1.jpg" alt="Urban Cafe" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Urban Cafe</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('cafe', 9)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Brewery Project Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/brewery/project1.jpg" alt="Modern Brewery" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Modern Brewery</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('brewery', 11)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Commercial Section -->
    <div class="bg-slate-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="order-2 lg:order-1">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-4">
                                <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                    <img src="/static/images/projects/commercial/bejewelled/1.jpg" alt="Bejewelled Showroom" class="object-cover">
                                </div>
                                <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                    <img src="/static/images/projects/commercial/bejewelled/2.jpg" alt="Bejewelled Interior" class="object-cover">
                                </div>
                            </div>
                            <div class="mt-8">
                                <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                    <img src="/static/images/projects/commercial/special/1.jpg" alt="Something Special Commercial" class="object-cover">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-6 order-1 lg:order-2">
                        <span class="text-accent text-sm tracking-wider uppercase">Commercial Design</span>
                        <h2 class="text-4xl md:text-5xl font-bold" style="font-family: 'Playfair Display', serif;">
                            Commercial Projects
                        </h2>
                        <p class="text-gray-600 text-lg leading-relaxed">
                            Commercial projects encompass office buildings, shopping complexes, retail outlets, and mixed-use developments. These projects are tailored to support business operations, customer service, and retail activities.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Office Spaces
                            </li>
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Retail Outlets
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8">Featured Commercial Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Modern Tech Park Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/commercial/project1.jpg" alt="Tech Park" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Modern Tech Park</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('techpark', 10)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Bejewelled Project Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/commercial/bejewelled/1.jpg" alt="Bejewelled Showroom" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Bejewelled Commercial Showroom</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('bejewelled', 8)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Special Commercial Project Card -->
                        <div class="group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/commercial/special/1.jpg" alt="Something Special Commercial" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Something Special Commercial</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                    <button onclick="openGallery('special', 6)" 
                                            class="mt-4 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-lg transition-all">
                                        View Album
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Educational Institutes Section -->
    <div class="bg-emerald-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-accent text-sm tracking-wider uppercase">Educational Design</span>
                        <h2 class="text-4xl md:text-5xl font-bold" style="font-family: 'Playfair Display', serif;">
                            Educational Institutes
                        </h2>
                        <p class="text-gray-600 text-lg leading-relaxed">
                            Educational projects include schools, colleges, and universities designed to provide conducive learning environments. These projects focus on creating spaces that support academic activities, research, and student engagement.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Classrooms
                            </li>
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Laboratories
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/educational/school1.jpg" alt="School Project" class="object-cover">
                            </div>
                            <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/educational/college1.jpg" alt="College Project" class="object-cover">
                            </div>
                        </div>
                        <div class="mt-8">
                            <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/educational/university1.jpg" alt="University Project" class="object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8">Featured Educational Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Project Cards -->
                        <div class="group cursor-pointer">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/educational/project1.jpg" alt="Modern School" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Modern School</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hospitality Section -->
    <div class="bg-rose-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-accent text-sm tracking-wider uppercase">Hospitality Design</span>
                        <h2 class="text-4xl md:text-5xl font-bold" style="font-family: 'Playfair Display', serif;">
                            Hospitality Projects
                        </h2>
                        <p class="text-gray-600 text-lg leading-relaxed">
                            Hospitality projects include hotels, resorts, and other accommodations designed to provide comfort and luxury to guests. These projects focus on creating inviting and functional spaces that enhance the guest experience.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Guest Rooms
                            </li>
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Lobbies
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/hospitality/hotel1.jpg" alt="Hotel Project" class="object-cover">
                            </div>
                            <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/hospitality/resort1.jpg" alt="Resort Project" class="object-cover">
                            </div>
                        </div>
                        <div class="mt-8">
                            <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/hospitality/spa1.jpg" alt="Spa Project" class="object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8">Featured Hospitality Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Project Cards -->
                        <div class="group cursor-pointer">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/hospitality/project1.jpg" alt="Luxury Hotel" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">Luxury Hotel</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Public Buildings Section -->
    <div class="bg-blue-50/80">
        <div class="container mx-auto px-4 mb-32">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <span class="text-accent text-sm tracking-wider uppercase">Public Design</span>
                        <h2 class="text-4xl md:text-5xl font-bold" style="font-family: 'Playfair Display', serif;">
                            Public Buildings
                        </h2>
                        <p class="text-gray-600 text-lg leading-relaxed">
                            Public building projects include government buildings, community centers, and other public facilities designed to serve the community. These projects focus on creating functional and accessible spaces for public use.
                        </p>
                        <ul class="grid grid-cols-2 gap-4 mt-6">
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Government Buildings
                            </li>
                            <li class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                </svg>
                                Community Centers
                            </li>
                        </ul>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-4">
                            <div class="aspect-w-4 aspect-h-5 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/public/government1.jpg" alt="Government Building" class="object-cover">
                            </div>
                            <div class="aspect-w-4 aspect-h-3 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/public/community1.jpg" alt="Community Center" class="object-cover">
                            </div>
                        </div>
                        <div class="mt-8">
                            <div class="aspect-w-4 aspect-h-6 rounded-xl overflow-hidden">
                                <img src="/static/images/projects/public/library1.jpg" alt="Library Project" class="object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reference Projects -->
                <div class="mt-16">
                    <h3 class="text-2xl font-bold mb-8">Featured Public Projects</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Project Cards -->
                        <div class="group cursor-pointer">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="/static/images/projects/public/project1.jpg" alt="City Hall" 
                                     class="w-full aspect-[4/3] object-cover transform group-hover:scale-110 transition-all duration-700">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 p-6 flex flex-col justify-end">
                                    <h4 class="text-white text-xl font-bold">City Hall</h4>
                                    <p class="text-gray-300">Bangalore, 2023</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Gallery Modal -->
<div id="galleryModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center">
    <div class="relative max-w-7xl mx-auto px-4">
        <!-- Close Button -->
        <button onclick="closeGallery()" class="absolute -top-12 right-4 text-white text-3xl">&times;</button>
        
        <!-- Project Title -->
        <h2 id="modalTitle" class="text-white text-2xl font-bold mb-4 text-center"></h2>
        
        <!-- Main Image -->
        <div class="relative">
            <img id="mainImage" src="" alt="" class="max-h-[70vh] mx-auto">
            <!-- Navigation Arrows -->
            <button onclick="prevImage()" class="absolute left-0 top-1/2 -translate-y-1/2 text-white text-4xl px-4 hover:text-yellow-500">❮</button>
            <button onclick="nextImage()" class="absolute right-0 top-1/2 -translate-y-1/2 text-white text-4xl px-4 hover:text-yellow-500">❯</button>
        </div>
        
        <!-- Thumbnails -->
        <div id="thumbnails" class="flex space-x-2 mt-4 overflow-x-auto pb-2"></div>
    </div>
</div>

<script>
const projects = [
    { id: 'letranquil', name: 'Le Tranquil', count: 12 },
    { id: 'catalyst', name: 'Catalyst', count: 8 },
    { id: 'candour', name: 'Candour', count: 10 },
    { id: 'blooming', name: 'The Blooming Haus', count: 15 },
    { id: 'sanctum', name: 'Sanctum', count: 9 },
    { id: 'urban', name: 'Urban Envelope', count: 11 },
    { id: 'cantilever', name: 'The Cantilever', count: 7 },
    { id: 'frames', name: 'The Frames Residence', count: 13 },
    { id: 'metamorphosis', name: 'Meta Morphosis Public Building', count: 10 },
    { id: 'wateredge', name: 'Water Edge Resort', count: 14 },
    { id: 'bejewelled', name: 'Bejewelled Commercial Showroom', count: 8 },
    { id: 'special', name: 'Something Special Commercial', count: 6 },
    { id: 'cafe', name: 'Cafe', count: 9 },
    { id: 'brewery', name: 'Brewery', count: 11 },
    { id: 'neuron', name: 'Neuron School', count: 12 }
];

let currentIndex = 4; // Start after initial 4 projects
let currentImages = [];
let currentImageIndex = 0;

// Load More Projects
document.getElementById('loadMore').addEventListener('click', function() {
    const container = document.getElementById('projectContainer');
    const projectsToAdd = projects.slice(currentIndex, currentIndex + 4);
    
    // Hide all current project cards
    const currentCards = container.querySelectorAll('.project-card');
    currentCards.forEach(card => {
        card.classList.add('hidden');
    });
    
    // Add new project cards
    projectsToAdd.forEach(project => {
        const projectCard = `
            <div class="project-card bg-white shadow-lg rounded-xl overflow-hidden cursor-pointer" 
                 onclick="openGallery('${project.id}', ${project.count})" 
                 data-project="${project.name}">
                <img src="/static/images/projects/${project.id}/1.jpg" alt="${project.name}" 
                     class="w-full h-64 object-cover hover:scale-105 transition-transform duration-300">
                <div class="p-4">
                    <h3 class="text-xl font-bold text-yellow-700">${project.name}</h3>
                </div>
            </div>
        `;
        container.insertAdjacentHTML('beforeend', projectCard);
    });
    
    currentIndex += 4;
    if (currentIndex >= projects.length) {
        this.style.display = 'none';
        document.getElementById('backToStart').classList.remove('hidden');
    }
});

// Back to Start Function
document.getElementById('backToStart').addEventListener('click', function() {
    const container = document.getElementById('projectContainer');
    
    // Remove all current cards
    container.innerHTML = '';
    
    // Add back initial 4 projects
    projects.slice(0, 4).forEach(project => {
        const projectCard = `
            <div class="project-card bg-white shadow-lg rounded-xl overflow-hidden cursor-pointer" 
                 onclick="openGallery('${project.id}', ${project.count})" 
                 data-project="${project.name}">
                <img src="/static/images/projects/${project.id}/1.jpg" alt="${project.name}" 
                     class="w-full h-64 object-cover hover:scale-105 transition-transform duration-300">
                <div class="p-4">
                    <h3 class="text-xl font-bold text-yellow-700">${project.name}</h3>
                </div>
            </div>
        `;
        container.insertAdjacentHTML('beforeend', projectCard);
    });
    
    // Reset state
    currentIndex = 4;
    this.classList.add('hidden');
    document.getElementById('loadMore').style.display = 'inline-block';
});

// Gallery Functions
function openGallery(projectId, imageCount) {
    const modal = document.getElementById('galleryModal');
    
    // Update title based on project ID
    const projectTitles = {
        'cafe': 'Urban Cafe Project',
        'brewery': 'Modern Brewery Project',
        'bejewelled': 'Bejewelled Commercial Showroom',
        'special': 'Something Special Commercial Project',
        'techpark': 'Modern Tech Park Project'  // Add this line
    };
    
    // Get project path based on ID
    const projectPaths = {
        'cafe': '/static/images/projects/cafe',  // Update this path to match your actual structure
        'brewery': '/static/images/projects/brewery',
        'bejewelled': '/static/images/projects/commercial/bejewelled',
        'special': '/static/images/projects/commercial/special',
        'techpark': '/static/images/projects/commercial/techpark'  // Add this line
    };
    
    const basePath = projectPaths[projectId] || `/static/images/projects/${projectId}`;
    document.getElementById('modalTitle').textContent = projectTitles[projectId] || projectId;
    
    // Generate image paths with proper numbering
    currentImages = Array.from({length: imageCount}, (_, i) => `${basePath}/project${i + 1}.jpg`);
    currentImageIndex = 0;
    
    updateMainImage();
    createThumbnails();
    
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeGallery() {
    document.getElementById('galleryModal').classList.add('hidden');
    document.body.style.overflow = 'auto';
}

function updateMainImage() {
    const mainImage = document.getElementById('mainImage');
    mainImage.src = currentImages[currentImageIndex];
}

function createThumbnails() {
    const container = document.getElementById('thumbnails');
    container.innerHTML = '';
    
    currentImages.forEach((src, index) => {
        const thumb = document.createElement('img');
        thumb.src = src;
        thumb.classList.add('h-20', 'w-20', 'object-cover', 'cursor-pointer');
        if (index === currentImageIndex) {
            thumb.classList.add('border-2', 'border-yellow-500');
        }
        thumb.onclick = () => {
            currentImageIndex = index;
            updateMainImage();
            updateThumbnailSelection();
        };
        container.appendChild(thumb);
    });
}

function updateThumbnailSelection() {
    const thumbnails = document.querySelectorAll('#thumbnails img');
    thumbnails.forEach((thumb, index) => {
        if (index === currentImageIndex) {
            thumb.classList.add('border-2', 'border-yellow-500');
        } else {
            thumb.classList.remove('border-2', 'border-yellow-500');
        }
    });
}

function nextImage() {
    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
    updateMainImage();
    updateThumbnailSelection();
}

function prevImage() {
    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
    updateMainImage();
    updateThumbnailSelection();
}

// Close modal on escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeGallery();
    }
});
</script>
{% endblock %}
